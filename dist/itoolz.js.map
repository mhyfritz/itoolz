{"version":3,"sources":["../src/itoolz.js"],"names":[],"mappings":";;;;;;;;QAAiB,UAAU,GAAV,UAAU;QAeX,GAAG,GAAH,GAAG;QASH,GAAG,GAAH,GAAG;QASF,KAAK,GAAL,KAAK;QAQL,iBAAiB,GAAjB,iBAAiB;QAQjB,QAAQ,GAAR,QAAQ;QAQR,KAAK,GAAL,KAAK;QAML,KAAK,GAAL,KAAK;QAaL,SAAS,GAAT,SAAS;QAcT,SAAS,GAAT,SAAS;QAIT,MAAM,GAAN,MAAM;QAWN,WAAW,GAAX,WAAW;QAOX,IAAI,GAAJ,IAAI;QAgBL,IAAI,GAAJ,IAAI;QASH,GAAG,GAAH,GAAG;QAMJ,GAAG,GAAH,GAAG;QAcH,GAAG,GAAH,GAAG;QAcH,IAAI,GAAJ,IAAI;QAIH,KAAK,GAAL,KAAK;QAaN,MAAM,GAAN,MAAM;QAcL,MAAM,GAAN,MAAM;QASN,KAAK,GAAL,KAAK;QAmBL,QAAQ,GAAR,QAAQ;QAiBR,OAAO,GAAP,OAAO;QAMP,SAAS,GAAT,SAAS;QAST,GAAG,GAAH,GAAG;;;;iBAtQH,UAAU,EAiCV,KAAK,EAQL,iBAAiB,EAQjB,QAAQ,EAQR,KAAK,EAML,KAAK,EAaL,SAAS,EAcT,SAAS,EAIT,MAAM,EAWN,WAAW,EAOX,IAAI,EAyBJ,GAAG,EAsCH,KAAK,EA2BL,MAAM,EASN,KAAK,EAmBL,QAAQ,EAiBR,OAAO,EAMP,SAAS,EAST,GAAG;;AAtQb,SAAU,UAAU,CAAC,EAAE;MAAE,CAAC,gCAAG,GAAG;;MACjC,EAAE,EACF,IAAI,EACJ,GAAG,kFAME,CAAC;;;;;AARN,UAAE,GAAG,IAAI,CAAC,EAAE,CAAC;AACb,YAAI,GAAG,EAAE,CAAC,IAAI,EAAE;AAChB,WAAG;;aACH,IAAI,CAAC,IAAI;;;;;;;;AAGb,WAAG,GAAG,IAAI,CAAC,KAAK,CAAC;;eACX,GAAG;;;;;;;oBACK,EAAE;;;;;;;;AAAP,SAAC;;AACR,WAAG,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;;eACV,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAEZ;;AAEM,SAAS,GAAG,CAAC,EAAE,EAAe;MAAb,CAAC,gCAAG,OAAO;;;;;;AACjC,0BAAc,EAAE,mIAAE;UAAT,CAAC;;AACR,UAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;AACT,eAAO,KAAK,CAAC;OACd;KACF;;;;;;;;;;;;;;;;AACD,SAAO,IAAI,CAAC;CACb;;AAEM,SAAS,GAAG,CAAC,EAAE,EAAe;MAAb,CAAC,gCAAG,OAAO;;;;;;AACjC,0BAAc,EAAE,mIAAE;UAAT,CAAC;;AACR,UAAI,CAAC,CAAC,CAAC,CAAC,EAAE;AACR,eAAO,IAAI,CAAC;OACb;KACF;;;;;;;;;;;;;;;;AACD,SAAO,KAAK,CAAC;CACd;;AAEM,SAAU,KAAK;;;;;MAAI,GAAG;;;;MAClB,EAAE;;;;;;MACA,CAAC;;;;;;;;;;;qCAFY,GAAG;AAAH,aAAG;;;qBACZ,GAAG;;;;;;;;AAAT,UAAE;;;;;qBACK,EAAE;;;;;;;;AAAP,SAAC;;eACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAGZ;;AAEM,SAAU,iBAAiB,CAAC,EAAE;2FAC1B,EAAE,uFACA,CAAC;;;;;;;;;qBADG,EAAE;;;;;;;;AAAR,UAAE;;;;;qBACK,EAAE;;;;;;;;AAAP,SAAC;;eACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAGZ;;AAEM,SAAU,QAAQ,CAAC,EAAE,EAAE,MAAM;yGACxB,GAAG,EAAE,GAAG;;;;;;;;;qBAAK,GAAG,CAAC,EAAE,EAAE,MAAM,CAAC;;;;;;;;;AAA5B,WAAG;AAAE,WAAG;;aACZ,GAAG;;;;;;eACC,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAGd;;AAEM,SAAU,KAAK;MAAC,KAAK,gCAAG,CAAC;MAAE,IAAI,gCAAG,CAAC;MAC/B,CAAC;;;;AAAD,SAAC,GAAG,KAAK;;;;eACV,CAAC;;;AADa,SAAC,IAAI,IAAI;;;;;;;;;CAGhC;;AAEM,SAAU,KAAK,CAAC,EAAE;MACnB,EAAE,uFAMK,CAAC;;;;;AANR,UAAE,GAAG,EAAE;;;;;qBACG,EAAE;;;;;;;;AAAP,SAAC;;eACF,CAAC;;;AACP,UAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAEN,IAAI;;;;;;;;;sBACK,EAAE;;;;;;;;AAAP,SAAC;;eACF,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAGZ;;AAEM,SAAU,SAAS,CAAC,SAAS,EAAE,EAAE;MAClC,CAAC,EACD,EAAE;;;;;AADF,SAAC;AACD,UAAE,GAAG,IAAI,CAAC,EAAE,CAAC;;;;;sBACP,EAAE;;;;;;;;AAAP,SAAC;;YACC,SAAS,CAAC,CAAC,CAAC;;;;;;eACT,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;sBAID,EAAE;;;;;;;;AAAP,SAAC;;eACE,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAEV;;AAEM,SAAU,SAAS,CAAC,EAAE;MAAE,KAAK,gCAAG,CAAC;;;;yCAC/B,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC;;;;;;;CAC7B;;AAEM,SAAU,MAAM,CAAC,SAAS,EAAE,EAAE;gGAI1B,CAAC;;;;;AAHV,YAAI,CAAC,SAAS,EAAE;AACd,mBAAS,GAAG,OAAO,CAAC;SACrB;;;;;sBACa,EAAE;;;;;;;;AAAP,SAAC;;aACJ,SAAS,CAAC,CAAC,CAAC;;;;;;eACR,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAGZ;;AAEM,SAAU,WAAW,CAAC,SAAS,EAAE,EAAE;;;;AACxC,YAAI,CAAC,SAAS,EAAE;AACd,mBAAS,GAAG,OAAO,CAAC;SACrB;yCACM,MAAM,CAAC,UAAA,CAAC;iBAAI,CAAC,SAAS,CAAC,CAAC,CAAC;SAAA,EAAE,EAAE,CAAC;;;;;;;CACtC;;AAEM,SAAU,IAAI,CAAC,GAAG,EAAE,QAAQ;;;;cAC7B,QAAQ,KAAK,SAAS,CAAA;;;;;yCACjB,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,GAAG,GAAG;;;;;;;yCAElD,wBAAA;cAEA,CAAC;;;;qBADA,IAAI;;;;;AACL,iBAAC,GAAG,GAAG,EAAE;;sBACT,CAAC,KAAK,QAAQ,CAAA;;;;;;;;;uBAGZ,CAAC;;;;;;;;;;;SAEV,GAAE;;;;;;;CAEN;;AAEM,SAAS,IAAI,CAAC,GAAG,EAAE;AACxB,MAAI,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE;AACxB,wCAAW,GAAG,GAAE;GACjB,MAAM,IAAI,GAAG,CAAC,WAAW,IAAI,GAAG,CAAC,WAAW,CAAC,IAAI,KAAK,QAAQ,EAAE;AAC/D,WAAO,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;GACzB;AACD,SAAO,IAAI,CAAC;CACb;;AAEM,SAAU,GAAG,CAAC,CAAC;;;;;MAAK,GAAG;;;;MACpB,EAAE;;;;;;;;;;;sCADe,GAAG;AAAH,aAAG;;;sBACd,GAAG,kBAAI,GAAG,CAAC;;;;;;;;AAAjB,UAAE;;eACF,CAAC,qCAAI,EAAE,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAEjB;;AAEM,SAAS,GAAG,CAAC,EAAE,EAAE,OAAO,EAAE;AAC/B,MAAI,QAAQ,GAAG,CAAC,QAAQ,CAAC;AACzB,MAAI,GAAG,YAAA,CAAC;AACR,MAAI,MAAM,YAAA,CAAC;;;;;;AACX,2BAAc,EAAE,wIAAE;UAAT,CAAC;;AACR,YAAM,GAAG,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAClC,UAAI,MAAM,GAAG,QAAQ,EAAE;AACrB,gBAAQ,GAAG,MAAM,CAAC;AAClB,WAAG,GAAG,CAAC,CAAC;OACT;KACF;;;;;;;;;;;;;;;;AACD,SAAO,GAAG,CAAC;CACZ;;AAEM,SAAS,GAAG,CAAC,EAAE,EAAE,OAAO,EAAE;AAC/B,MAAI,QAAQ,GAAG,QAAQ,CAAC;AACxB,MAAI,GAAG,YAAA,CAAC;AACR,MAAI,MAAM,YAAA,CAAC;;;;;;AACX,2BAAc,EAAE,wIAAE;UAAT,CAAC;;AACR,YAAM,GAAG,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AAClC,UAAI,MAAM,GAAG,QAAQ,EAAE;AACrB,gBAAQ,GAAG,MAAM,CAAC;AAClB,WAAG,GAAG,CAAC,CAAC;OACT;KACF;;;;;;;;;;;;;;;;AACD,SAAO,GAAG,CAAC;CACZ;;AAEM,SAAS,IAAI,CAAC,EAAE,EAAE;AACvB,SAAO,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;CACxB;;AAEM,SAAU,KAAK,CAAC,KAAK,EAAE,IAAI;MAAE,IAAI,gCAAG,CAAC;;gGAKjC,CAAC;;;;;AAJV,YAAI,IAAI,KAAK,SAAS,EAAE;AACtB,cAAI,GAAG,KAAK,CAAC;AACb,eAAK,GAAG,CAAC,CAAC;SACX;;;;;sBACa,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC;;;;;;;;AAAvB,SAAC;;cACJ,IAAI,KAAK,IAAI,IAAI,CAAC,IAAI,IAAI,CAAA;;;;;;;;;eAGxB,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAEV;;AAEM,SAAS,MAAM,CAAC,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE;AAClC,MAAI,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC;AAClB,MAAI,GAAG,YAAA,CAAC;AACR,MAAI,IAAI,KAAK,SAAS,EAAE;AACtB,OAAG,GAAG,IAAI,CAAC;GACZ,MAAM;AACL,OAAG,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;GACvB;;;;;;AACD,2BAAc,EAAE,wIAAE;UAAT,CAAC;;AACR,SAAG,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;KACjB;;;;;;;;;;;;;;;;AACD,SAAO,GAAG,CAAC;CACZ;;AAEM,SAAU,MAAM,CAAC,IAAI,EAAE,CAAC;;;;aACtB,IAAI;;;;;cACL,CAAC,KAAK,SAAS,IAAI,CAAC,EAAE,KAAK,CAAC,CAAA;;;;;;;;;eAG1B,IAAI;;;;;;;;;;;CAEb;;AAEM,SAAU,KAAK,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI;MAAE,IAAI,gCAAG,CAAC;;MAK1C,EAAE,EACF,KAAK,2GACC,CAAC,EAAE,CAAC;;;;;AANd,YAAI,IAAI,KAAK,SAAS,EAAE;AACtB,cAAI,GAAG,KAAK,CAAC;AACb,eAAK,GAAG,CAAC,CAAC;SACX;AACG,UAAE,GAAG,KAAK,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC;AAC7B,aAAK,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK;;;;;sBACR,SAAS,CAAC,EAAE,CAAC;;;;;;;;;AAAtB,SAAC;AAAE,SAAC;;cACR,KAAK,KAAK,SAAS,CAAA;;;;;;;;cAGnB,CAAC,KAAK,KAAK,CAAA;;;;;;eACP,CAAC;;;AACP,aAAK,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAI7B;;AAEM,SAAU,QAAQ,CAAC,EAAE;MACtB,EAAE,EAWG,CAAC;;;;AAXN,UAAE;;cAEF,EAAE,CAAC,WAAW,CAAC,IAAI,KAAK,OAAO,CAAA;;;;;AACjC,UAAE,GAAG,EAAE,CAAC;;;;;cACC,EAAE,CAAC,WAAW,CAAC,IAAI,KAAK,4BAA4B,CAAA;;;;;AAC7D,UAAE,gCAAO,EAAE,EAAC,CAAC;;;;;;;;AAMN,SAAC,GAAG,EAAE,CAAC,MAAM,GAAG,CAAC;;;cAAE,CAAC,IAAI,CAAC,CAAA;;;;;;eAC1B,EAAE,CAAC,CAAC,CAAC;;;AADuB,SAAC,IAAI,CAAC;;;;;;;;;CAG3C;;AAEM,SAAU,OAAO,CAAC,CAAC,EAAE,EAAE;gGACnB,EAAE;;;;;;;;;sBAAI,EAAE;;;;;;;;AAAR,UAAE;;eACH,CAAC,qCAAI,EAAE,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAEjB;;AAEM,SAAU,SAAS,CAAC,SAAS,EAAE,EAAE;gGAC7B,CAAC;;;;;;;;;sBAAI,EAAE;;;;;;;;AAAP,SAAC;;YACH,SAAS,CAAC,CAAC,CAAC;;;;;;;;;eAGX,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAEV;;AAEM,SAAU,GAAG;qCAAI,GAAG;AAAH,OAAG;;;MACrB,GAAG,EAGH,cAAc,EAEZ,GAAG;;;;AALL,WAAG,GAAG,GAAG,CAAC,GAAG,CAAC,UAAU,EAAE,EAAE;AAC9B,iBAAO,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC;SACzD,CAAC;;AACE,sBAAc,GAAG,SAAjB,cAAc,CAAG,CAAC;iBAAI,CAAC,KAAK,SAAS;SAAA;;;aAClC,GAAG;;;;;AACJ,WAAG,GAAG,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC;;aACnB,GAAG,CAAC,GAAG,EAAE,cAAc,CAAC;;;;;;eACpB,GAAG;;;;;;;;;;;;;;;;;;CAKd;;AAED,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE;AACjB,SAAO,CAAC,GAAG,CAAC,CAAC;CACd","file":"itoolz.js","sourcesContent":["export function* accumulate(xs, f = add) {\n  let it = iter(xs);\n  let head = it.next();\n  let acc;\n  if (head.done) {\n    return;\n  }\n  acc = head.value;\n  yield acc;\n  for (let x of it) {\n    acc = f(acc, x);\n    yield acc;\n  }\n}\n\nexport function all(it, f = Boolean) {\n  for (let x of it) {\n    if (!f(x)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function any(it, f = Boolean) {\n  for (let x of it) {\n    if (f(x)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function* chain(...its) {\n  for (let it of its) {\n    for (let x of it) {\n      yield x;\n    }\n  }\n}\n\nexport function* chainFromIterable(it) {\n  for (let xs of it) {\n    for (let x of xs) {\n      yield x;\n    }\n  }\n}\n\nexport function* compress(it, select) {\n  for (let [val, sel] of zip(it, select)) {\n    if (sel) {\n      yield val;\n    }\n  }\n}\n\nexport function* count(start = 0, step = 1) {\n  for (let i = start; ; i += step) {\n    yield i;\n  }\n}\n\nexport function* cycle(it) {\n  let xs = [];\n  for (let x of it) {\n    yield x;\n    xs.push(x);\n  }\n  while (true) {  //eslint-disable-line no-constant-condition\n    for (let x of xs) {\n      yield x;\n    }\n  }\n}\n\nexport function* dropwhile(predicate, xs) {\n  let x;\n  let it = iter(xs);\n  for (x of it) {\n    if (!predicate(x)) {\n      yield x;\n      break;\n    }\n  }\n  for (x of it) {\n    yield x;\n  }\n}\n\nexport function* enumerate(xs, start = 0) {\n  yield* zip(count(start), xs);\n}\n\nexport function* filter(predicate, it) {\n  if (!predicate) {\n    predicate = Boolean;\n  }\n  for (let x of it) {\n    if (predicate(x)) {\n      yield x;\n    }\n  }\n}\n\nexport function* filterfalse(predicate, it) {\n  if (!predicate) {\n    predicate = Boolean;\n  }\n  yield* filter(x => !predicate(x), it);\n}\n\nexport function* iter(obj, sentinel) {\n  if (sentinel === undefined) {\n    yield* obj[Symbol.iterator] ? obj[Symbol.iterator]() : obj;\n  } else {\n    yield* (function* () {\n      while (true) { //eslint-disable-line no-constant-condition\n        let x = obj();\n        if (x === sentinel) {\n          return;\n        }\n        yield x;\n      }\n    }());\n  }\n}\n\nexport function list(obj) {\n  if (obj[Symbol.iterator]) {\n    return [...obj];\n  } else if (obj.constructor && obj.constructor.name === 'Object') {\n    return Object.keys(obj);\n  }\n  return null;\n}\n\nexport function* map(f, ...xss) {\n  for(let xs of zip(...xss)) {\n    yield f(...xs);\n  }\n}\n\nexport function max(it, keyfunc) {\n  let maxValue = -Infinity;\n  let res;\n  let xValue;\n  for (let x of it) {\n    xValue = keyfunc ? keyfunc(x) : x;\n    if (xValue > maxValue) {\n      maxValue = xValue;\n      res = x;\n    }\n  }\n  return res;\n}\n\nexport function min(it, keyfunc) {\n  let minValue = Infinity;\n  let res;\n  let xValue;\n  for (let x of it) {\n    xValue = keyfunc ? keyfunc(x) : x;\n    if (xValue < minValue) {\n      minValue = xValue;\n      res = x;\n    }\n  }\n  return res;\n}\n\nexport function next(it) {\n  return it.next().value;\n}\n\nexport function* range(start, stop, step = 1) {\n  if (stop === undefined) {\n    stop = start;\n    start = 0;\n  }\n  for (let i of count(start, step)) {\n    if (stop !== null && i >= stop) {\n      return;\n    }\n    yield i;\n  }\n}\n\nexport function reduce(f, xs, init) {\n  let it = iter(xs);\n  let acc;\n  if (init !== undefined) {\n    acc = init;\n  } else {\n    acc = it.next().value;\n  }\n  for (let x of it) {\n    acc = f(acc, x);\n  }\n  return acc;\n}\n\nexport function* repeat(elem, n) {\n  while (true) { //eslint-disable-line no-constant-condition\n    if (n !== undefined && n-- === 0) {\n      break;\n    }\n    yield elem;\n  }\n}\n\nexport function* slice(it, start, stop, step = 1) {\n  if (stop === undefined) {\n    stop = start;\n    start = 0;\n  }\n  let is = range(start, stop, step);\n  let nexti = is.next().value;\n  for (let [i, x] of enumerate(it)) {\n    if (nexti === undefined) {\n      break;\n    }\n    if (i === nexti) {\n      yield x;\n      nexti = is.next().value;\n    }\n  }\n  return;\n}\n\nexport function* reversed(it) {\n  let xs;\n\n  if (it.constructor.name === 'Array') {\n    xs = it;\n  } else if (it.constructor.name === 'GeneratorFunctionPrototype') {\n    xs = [...it];\n  } else {\n    // TODO error handling\n    return;\n  }\n\n  for (let i = xs.length - 1; i >= 0; i -= 1) {\n    yield xs[i];\n  }\n}\n\nexport function* starmap(f, it) {\n  for (let xs of it) {\n    yield f(...xs);\n  }\n}\n\nexport function* takewhile(predicate, it) {\n  for (let x of it) {\n    if (!predicate(x)) {\n      return;\n    }\n    yield x;\n  }\n}\n\nexport function* zip(...xss) {\n  let its = xss.map(function (xs) {\n    return xs[Symbol.iterator] ? xs[Symbol.iterator]() : xs;\n  });\n  let isNotUndefined = x => x !== undefined;\n  while (its) {\n    let ret = its.map(next);\n    if (all(ret, isNotUndefined)) {\n      yield ret;\n    } else {\n      return;\n    }\n  }\n}\n\nfunction add(x, y) {\n  return x + y;\n}\n"]}